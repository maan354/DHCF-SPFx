/*!
 * TypeWriting.js
 *
 * Copyright Â© 2015 Eddie Wen | MIT license
 * https://github.com/EddieWen-Taiwan/TypeWriting.js
 */

!function(t,n){"use strict";"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.TypeWriting=n()}(this,function(){"use strict";var t=0,n=!1,i={targetElement:null,inputString:"",typing_interval:150,blink_interval:"0.7s",cursor_color:"black",tw_callback:function(){},task:"unready"},e=function(){if(t<i.inputString.length){var o=r();"<"==o.slice(-1)?n=!0:">"==o.slice(-1)&&(n=!1),i.targetElement.innerHTML=o,n?e():setTimeout(function(){e()},i.typing_interval)}else i.task="ready",t=0,i.tw_callback.call()},r=function(){return i.inputString.slice(0,++t)},o=function(){i.tw_callback=function(){}},a=function(t,n){var i;for(i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);return t},l=function(t,n){if(t&&"object"==typeof t&&(i=a(i,t)),!t.inputString)throw new Error("Missing argument: inputString");if("string"!=typeof t.inputString)throw new Error(t.inputString+" is not a string");n?"function"==typeof n?i.tw_callback=n:(console.error(n+" is not a function"),o()):o();var r=document.createElement("div");r.style.display="inline-block",r.innerHTML="I",i.targetElement.appendChild(r);var l=r.offsetHeight,c=r.offsetWidth;i.targetElement.removeChild(r);var s="@-webkit-keyframes blink{0%,100%{opacity:1}50%{opacity:0}}@-moz-keyframes blink{0%,100%{opacity:1}50%{opacity:0}}@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}.typingCursor::after{content:'';width:"+c+"px;height:"+l+"px;margin-left:5px;display:inline-block;vertical-align:bottom;background-color:"+i.cursor_color+";-webkit-animation:blink "+i.blink_interval+" infinite;-moz-animation:blink "+i.blink_interval+" infinite;animation:blink "+i.blink_interval+" infinite}",f=document.createElement("style");f.type="text/css",f.styleSheet?f.styleSheet.cssText=s:f.appendChild(document.createTextNode(s)),document.head.appendChild(f),i.targetElement.className+=" typingCursor",i.task="typing",e()};return l.prototype={rewrite:function(t,n){if("typing"==i.task)console.warn("Last task is not finished yet."),setTimeout(function(){this.rewrite(t,n)}.bind(this),i.typing_interval);else{if(!t)throw new Error("Missing argument: inputString");if("string"!=typeof t)throw new Error(t+" is not a string");i.inputString=t,n?"function"==typeof n?i.tw_callback=n:(console.error(n+" is not a function"),o()):o(),i.task="typing",e()}}},l});