{"version":3,"file":"rtl-css-js.core.umd.min.js","sources":["../src/internal/utils.js","../src/internal/property-value-converters.js"],"sourcesContent":["/**\n * Takes an array of [keyValue1, keyValue2] pairs and creates an object of {keyValue1: keyValue2, keyValue2: keyValue1}\n * @param {Array} array the array of pairs\n * @return {Object} the {key, value} pair object\n */\nfunction arrayToObject(array) {\n  return array.reduce((obj, [prop1, prop2]) => {\n    obj[prop1] = prop2\n    obj[prop2] = prop1\n    return obj\n  }, {})\n}\n\nfunction isBoolean(val) {\n  return typeof val === 'boolean'\n}\n\nfunction isNumber(val) {\n  return typeof val === 'number'\n}\n\nfunction isNullOrUndefined(val) {\n  return val === null || typeof val === 'undefined'\n}\n\nfunction isObject(val) {\n  return val && typeof val === 'object'\n}\n\nfunction isString(val) {\n  return typeof val === 'string'\n}\n\nfunction includes(inclusive, inclusee) {\n  return inclusive.indexOf(inclusee) !== -1\n}\n\n/**\n * Flip the sign of a CSS value, possibly with a unit.\n *\n * We can't just negate the value with unary minus due to the units.\n *\n * @private\n * @param {String} value - the original value (for example 77%)\n * @return {String} the result (for example -77%)\n */\nfunction flipSign(value) {\n  if (parseFloat(value) === 0) {\n    // Don't mangle zeroes\n    return value\n  }\n\n  if (value[0] === '-') {\n    return value.slice(1)\n  }\n\n  return `-${value}`\n}\n\nfunction flipTransformSign(match, prefix, offset, suffix) {\n  return prefix + flipSign(offset) + suffix\n}\n\n/**\n * Takes a percentage for background position and inverts it.\n * This was copied and modified from CSSJanus:\n * https://github.com/cssjanus/cssjanus/blob/4245f834365f6cfb0239191a151432fb85abab23/src/cssjanus.js#L152-L175\n * @param {String} value - the original value (for example 77%)\n * @return {String} the result (for example 23%)\n */\nfunction calculateNewBackgroundPosition(value) {\n  const idx = value.indexOf('.')\n  if (idx === -1) {\n    value = `${100 - parseFloat(value)}%`\n  } else {\n    // Two off, one for the \"%\" at the end, one for the dot itself\n    const len = value.length - idx - 2\n    value = 100 - parseFloat(value)\n    value = `${value.toFixed(len)}%`\n  }\n  return value\n}\n\n/**\n * This takes a list of CSS values and converts it to an array\n * @param {String} value - something like `1px`, `1px 2em`, or `3pt rgb(150, 230, 550) 40px calc(100% - 5px)`\n * @return {Array} the split values (for example: `['3pt', 'rgb(150, 230, 550)', '40px', 'calc(100% - 5px)']`)\n */\nfunction getValuesAsList(value) {\n  return (\n    value\n      .replace(/ +/g, ' ') // remove all extraneous spaces\n      .split(' ')\n      .map(i => i.trim()) // get rid of extra space before/after each item\n      .filter(Boolean) // get rid of empty strings\n      // join items which are within parenthese\n      // luckily `calc (100% - 5px)` is invalid syntax and it must be `calc(100% - 5px)`, otherwise this would be even more complex\n      .reduce(\n        ({list, state}, item) => {\n          const openParansCount = (item.match(/\\(/g) || []).length\n          const closedParansCount = (item.match(/\\)/g) || []).length\n          if (state.parensDepth > 0) {\n            list[list.length - 1] = `${list[list.length - 1]} ${item}`\n          } else {\n            list.push(item)\n          }\n          state.parensDepth += openParansCount - closedParansCount\n          return {list, state}\n        },\n        {list: [], state: {parensDepth: 0}},\n      ).list\n  )\n}\n\n/**\n * This is intended for properties that are `top right bottom left` and will switch them to `top left bottom right`\n * @param {String} value - `1px 2px 3px 4px` for example, but also handles cases where there are too few/too many and\n * simply returns the value in those cases (which is the correct behavior)\n * @return {String} the result - `1px 4px 3px 2px` for example.\n */\nfunction handleQuartetValues(value) {\n  const splitValues = getValuesAsList(value)\n  if (splitValues.length <= 3 || splitValues.length > 4) {\n    return value\n  }\n  const [top, right, bottom, left] = splitValues\n  return [top, left, bottom, right].join(' ')\n}\n\nexport {\n  arrayToObject,\n  calculateNewBackgroundPosition,\n  flipTransformSign as calculateNewTranslate,\n  flipTransformSign,\n  flipSign,\n  handleQuartetValues,\n  includes,\n  isBoolean,\n  isNullOrUndefined,\n  isNumber,\n  isObject,\n  isString,\n  getValuesAsList,\n}\n","import {\n  includes,\n  isNumber,\n  calculateNewBackgroundPosition,\n  flipTransformSign,\n  handleQuartetValues,\n  getValuesAsList,\n} from './utils'\n\n// some values require a little fudging, that fudging goes here.\nconst propertyValueConverters = {\n  padding({value}) {\n    if (isNumber(value)) {\n      return value\n    }\n    return handleQuartetValues(value)\n  },\n  textShadow({value}) {\n    // intentionally leaving off the `g` flag here because we only want to change the first number (which is the offset-x)\n    return value.replace(/(-*)([.|\\d]+)/, (match, negative, number) => {\n      if (number === '0') {\n        return match\n      }\n      const doubleNegative = negative === '' ? '-' : ''\n      return `${doubleNegative}${number}`\n    })\n  },\n  borderColor({value}) {\n    return handleQuartetValues(value)\n  },\n  borderRadius({value}) {\n    if (isNumber(value)) {\n      return value\n    }\n    if (includes(value, '/')) {\n      const [radius1, radius2] = value.split('/')\n      const convertedRadius1 = propertyValueConverters.borderRadius({\n        value: radius1.trim(),\n      })\n      const convertedRadius2 = propertyValueConverters.borderRadius({\n        value: radius2.trim(),\n      })\n      return `${convertedRadius1} / ${convertedRadius2}`\n    }\n    const splitValues = getValuesAsList(value)\n    switch (splitValues.length) {\n      case 2: {\n        return splitValues.reverse().join(' ')\n      }\n      case 4: {\n        const [topLeft, topRight, bottomRight, bottomLeft] = splitValues\n        return [topRight, topLeft, bottomLeft, bottomRight].join(' ')\n      }\n      default: {\n        return value\n      }\n    }\n  },\n  background({\n    value,\n    valuesToConvert,\n    isRtl,\n    bgImgDirectionRegex,\n    bgPosDirectionRegex,\n  }) {\n    // Yeah, this is in need of a refactor ðŸ™ƒ...\n    // but this property is a tough cookie ðŸª\n    // get the backgroundPosition out of the string by removing everything that couldn't be the backgroundPosition value\n    const backgroundPositionValue = value\n      .replace(\n        /(url\\(.*?\\))|(rgba?\\(.*?\\))|(hsl\\(.*?\\))|(#[a-fA-F0-9]+)|((^| )(\\D)+( |$))/g,\n        '',\n      )\n      .trim()\n    // replace that backgroundPosition value with the converted version\n    value = value.replace(\n      backgroundPositionValue,\n      propertyValueConverters.backgroundPosition({\n        value: backgroundPositionValue,\n        valuesToConvert,\n        isRtl,\n        bgPosDirectionRegex,\n      }),\n    )\n    // do the backgroundImage value replacing on the whole value (because why not?)\n    return propertyValueConverters.backgroundImage({\n      value,\n      valuesToConvert,\n      bgImgDirectionRegex,\n    })\n  },\n  backgroundImage({value, valuesToConvert, bgImgDirectionRegex}) {\n    if (!includes(value, 'url(') && !includes(value, 'linear-gradient(')) {\n      return value\n    }\n    return value.replace(bgImgDirectionRegex, (match, g1, group2) => {\n      return match.replace(group2, valuesToConvert[group2])\n    })\n  },\n  backgroundPosition({value, valuesToConvert, isRtl, bgPosDirectionRegex}) {\n    return (\n      value\n        // intentionally only grabbing the first instance of this because that represents `left`\n        .replace(isRtl ? /^((-|\\d|\\.)+%)/ : null, (match, group) =>\n          calculateNewBackgroundPosition(group),\n        )\n        .replace(bgPosDirectionRegex, match => valuesToConvert[match])\n    )\n  },\n  backgroundPositionX({value, valuesToConvert, isRtl, bgPosDirectionRegex}) {\n    if (isNumber(value)) {\n      return value\n    }\n    return propertyValueConverters.backgroundPosition({\n      value,\n      valuesToConvert,\n      isRtl,\n      bgPosDirectionRegex,\n    })\n  },\n  transform({value}) {\n    // This was copied and modified from CSSJanus:\n    // https://github.com/cssjanus/cssjanus/blob/4a40f001b1ba35567112d8b8e1d9d95eda4234c3/src/cssjanus.js#L152-L153\n    const nonAsciiPattern = '[^\\\\u0020-\\\\u007e]'\n    const unicodePattern = '(?:(?:\\\\[0-9a-f]{1,6})(?:\\\\r\\\\n|\\\\s)?)'\n    const numPattern = '(?:[0-9]*\\\\.[0-9]+|[0-9]+)'\n    const unitPattern = '(?:em|ex|px|cm|mm|in|pt|pc|deg|rad|grad|ms|s|hz|khz|%)'\n    const escapePattern = `(?:${unicodePattern}|\\\\\\\\[^\\\\r\\\\n\\\\f0-9a-f])`\n    const nmstartPattern = `(?:[_a-z]|${nonAsciiPattern}|${escapePattern})`\n    const nmcharPattern = `(?:[_a-z0-9-]|${nonAsciiPattern}|${escapePattern})`\n    const identPattern = `-?${nmstartPattern}${nmcharPattern}*`\n    const quantPattern = `${numPattern}(?:\\\\s*${unitPattern}|${identPattern})?`\n    const signedQuantPattern = `((?:-?${quantPattern})|(?:inherit|auto))`\n    const translateXRegExp = new RegExp(\n      `(translateX\\\\s*\\\\(\\\\s*)${signedQuantPattern}(\\\\s*\\\\))`,\n      'gi',\n    )\n    const translateRegExp = new RegExp(\n      `(translate\\\\s*\\\\(\\\\s*)${signedQuantPattern}((?:\\\\s*,\\\\s*${signedQuantPattern}){0,1}\\\\s*\\\\))`,\n      'gi',\n    )\n    const translate3dRegExp = new RegExp(\n      `(translate3d\\\\s*\\\\(\\\\s*)${signedQuantPattern}((?:\\\\s*,\\\\s*${signedQuantPattern}){0,2}\\\\s*\\\\))`,\n      'gi',\n    )\n    const rotateRegExp = new RegExp(\n      `(rotate[ZY]?\\\\s*\\\\(\\\\s*)${signedQuantPattern}(\\\\s*\\\\))`,\n      'gi',\n    )\n    return value\n      .replace(translateXRegExp, flipTransformSign)\n      .replace(translateRegExp, flipTransformSign)\n      .replace(translate3dRegExp, flipTransformSign)\n      .replace(rotateRegExp, flipTransformSign)\n  },\n}\n\npropertyValueConverters.margin = propertyValueConverters.padding\npropertyValueConverters.borderWidth = propertyValueConverters.padding\npropertyValueConverters.boxShadow = propertyValueConverters.textShadow\npropertyValueConverters.webkitBoxShadow = propertyValueConverters.boxShadow\npropertyValueConverters.mozBoxShadow = propertyValueConverters.boxShadow\npropertyValueConverters.WebkitBoxShadow = propertyValueConverters.boxShadow\npropertyValueConverters.MozBoxShadow = propertyValueConverters.boxShadow\npropertyValueConverters.borderStyle = propertyValueConverters.borderColor\npropertyValueConverters.webkitTransform = propertyValueConverters.transform\npropertyValueConverters.mozTransform = propertyValueConverters.transform\npropertyValueConverters.WebkitTransform = propertyValueConverters.transform\npropertyValueConverters.MozTransform = propertyValueConverters.transform\npropertyValueConverters.transformOrigin =\n  propertyValueConverters.backgroundPosition\npropertyValueConverters.webkitTransformOrigin =\n  propertyValueConverters.transformOrigin\npropertyValueConverters.mozTransformOrigin =\n  propertyValueConverters.transformOrigin\npropertyValueConverters.WebkitTransformOrigin =\n  propertyValueConverters.transformOrigin\npropertyValueConverters.MozTransformOrigin =\n  propertyValueConverters.transformOrigin\n\n// kebab-case versions\n\npropertyValueConverters['text-shadow'] = propertyValueConverters.textShadow\npropertyValueConverters['border-color'] = propertyValueConverters.borderColor\npropertyValueConverters['border-radius'] = propertyValueConverters.borderRadius\npropertyValueConverters['background-image'] =\n  propertyValueConverters.backgroundImage\npropertyValueConverters['background-position'] =\n  propertyValueConverters.backgroundPosition\npropertyValueConverters['background-position-x'] =\n  propertyValueConverters.backgroundPositionX\npropertyValueConverters['border-width'] = propertyValueConverters.padding\npropertyValueConverters['box-shadow'] = propertyValueConverters.textShadow\npropertyValueConverters['-webkit-box-shadow'] =\n  propertyValueConverters.textShadow\npropertyValueConverters['-moz-box-shadow'] = propertyValueConverters.textShadow\npropertyValueConverters['border-style'] = propertyValueConverters.borderColor\npropertyValueConverters['-webkit-transform'] = propertyValueConverters.transform\npropertyValueConverters['-moz-transform'] = propertyValueConverters.transform\npropertyValueConverters['transform-origin'] =\n  propertyValueConverters.transformOrigin\npropertyValueConverters['-webkit-transform-origin'] =\n  propertyValueConverters.transformOrigin\npropertyValueConverters['-moz-transform-origin'] =\n  propertyValueConverters.transformOrigin\n\nexport default propertyValueConverters\n"],"names":["isNumber","val","includes","inclusive","inclusee","indexOf","flipSign","value","parseFloat","slice","flipTransformSign","match","prefix","offset","suffix","calculateNewBackgroundPosition","idx","len","length","toFixed","getValuesAsList","replace","split","map","i","trim","filter","Boolean","reduce","item","list","state","openParansCount","closedParansCount","parensDepth","push","handleQuartetValues","splitValues","top","right","bottom","join","propertyValueConverters","negative","number","radius1","radius2","borderRadius","reverse","topLeft","topRight","bottomRight","valuesToConvert","isRtl","bgImgDirectionRegex","bgPosDirectionRegex","backgroundPositionValue","backgroundPosition","backgroundImage","g1","group2","group","escapePattern","signedQuantPattern","translateXRegExp","RegExp","translateRegExp","translate3dRegExp","rotateRegExp","margin","padding","borderWidth","boxShadow","textShadow","webkitBoxShadow","mozBoxShadow","WebkitBoxShadow","MozBoxShadow","borderStyle","borderColor","webkitTransform","transform","mozTransform","WebkitTransform","MozTransform","transformOrigin","webkitTransformOrigin","mozTransformOrigin","WebkitTransformOrigin","MozTransformOrigin","backgroundPositionX","array","obj","prop1","prop2"],"mappings":"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"}